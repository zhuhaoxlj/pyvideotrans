# Whisper 缓存功能 - 快速入门

## 🚀 5 秒了解

Whisper 缓存功能会**自动保存** Whisper 处理结果，再次处理相同视频时**速度提升 90%+**！

## ✨ 立即使用

### 无需任何配置！

缓存功能已自动启用，你只需要：

1. **正常使用 LLM 智能字幕生成工具**
2. **第一次处理**: 正常速度（例如 3 分钟）
3. **第二次处理相同视频**: 超快速度（例如 10 秒）

就这么简单！🎉

## 📊 效果展示

### 第一次处理
```
🚀 开始处理...
🔍 检查缓存...
❌ 未找到缓存，开始 Whisper 处理...
🎤 开始识别语音...
⏳ 此过程可能需要几分钟，请耐心等待...
✅ 识别完成！(耗时: 120秒)
💾 缓存已保存

总耗时: 130秒
```

### 第二次处理（相同视频）
```
🚀 开始处理...
🔍 检查缓存...
✅ 找到缓存！直接使用缓存数据
📊 从缓存加载: 1234 个词

总耗时: 10秒  ⚡
```

**节省时间: 120秒 (92%)**

## 🎯 最佳使用场景

### 1️⃣ 测试不同的 LLM 模型
```
相同视频 + DeepSeek-R1    → 快速生成
相同视频 + Qwen2.5-7B     → 快速生成
相同视频 + GPT-4o-mini    → 快速生成
```

### 2️⃣ 调整断句参数
```
相同视频 + 不同最大词数   → 快速生成
相同视频 + 不同持续时间   → 快速生成
```

### 3️⃣ 重新处理字幕
```
视频 + 原始字幕 + LLM优化 → 快速生成
```

## 🔍 如何确认缓存工作？

查看日志，如果看到：
```
✅ 找到缓存！直接使用缓存数据
```

就说明缓存正在工作！

## 📁 缓存位置

缓存文件保存在：
```
{HOME_DIR}/whisper_cache/
```

每个视频一个 `.pkl` 文件。

## 🧹 如何清理缓存？

### 方法 1: 手动删除
```bash
# 进入缓存目录
cd {HOME_DIR}/whisper_cache/

# 删除所有缓存
rm *.pkl
```

### 方法 2: 删除特定视频缓存
```bash
# 删除单个缓存文件
rm {哈希值}.pkl
```

## 💡 实用技巧

### 技巧 1: 批量测试
```
1. 第一轮: 生成所有视频的缓存
2. 第二轮: 快速测试不同参数
```

### 技巧 2: 版本对比
```
用不同 LLM 模型生成多个版本
然后对比选择最佳版本
```

### 技巧 3: 开发调试
```
修改代码 → 测试（使用缓存）→ 快速验证
```

## ❓ 常见问题

### Q: 缓存会占用多少空间？
**A:** 每个视频约 50KB - 5MB，取决于长度。

### Q: 文件改了，缓存还能用吗？
**A:** 不能。文件内容改变会自动创建新缓存。

### Q: 可以禁用缓存吗？
**A:** 当前版本自动启用。如需重新处理，删除对应缓存文件即可。

### Q: 缓存会过期吗？
**A:** 当前版本不会自动过期，可手动清理。

## 📚 更多信息

- **详细文档**: `docs/WHISPER_CACHE_FEATURE.md`
- **使用示例**: `docs/WHISPER_CACHE_EXAMPLE.md`
- **更新说明**: `docs/WHISPER_CACHE_UPDATE.md`

## 🎉 开始享受

现在就试试吧！处理同一个视频多次，感受速度的提升！

**缓存让重复处理快如闪电！** ⚡

---

**问题反馈**: 如有问题，请查看详细文档或联系开发团队。

