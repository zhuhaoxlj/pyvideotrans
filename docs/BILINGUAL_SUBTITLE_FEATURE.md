# 双语字幕功能说明

## 功能概述

AI字幕翻译功能现在支持生成双语字幕文件，用户可以选择：
- **单字幕模式**：只包含翻译后的文本
- **双语字幕模式**：同时包含原文和译文

## 使用方法

### 1. 打开AI字幕翻译窗口

在主界面点击 **"AI字幕翻译"** 按钮，打开翻译配置窗口。

### 2. 配置翻译选项

- **LLM提供商**：选择您要使用的LLM服务商（OpenAI、Anthropic、Gemini、DeepSeek、SiliconFlow等）
- **API Key**：输入您的API密钥
- **模型**：选择或输入模型名称
- **API地址**：可选，自定义API地址
- **源语言**：选择原字幕的语言（支持自动检测）
- **目标语言**：选择翻译的目标语言
- **批次大小**：每次翻译的字幕条数（1-50）
- **🌏 生成双语字幕（原文+译文）**：勾选此选项将生成包含原文和译文的双语字幕

### 3. 选择字幕文件

点击 **"📁 选择字幕文件 (.srt)"** 按钮，选择要翻译的SRT字幕文件。

### 4. 开始翻译

点击 **"🚀 开始翻译"** 按钮，系统将自动进行翻译。

## 输出格式

### 单字幕模式（未勾选双语选项）

```
1
00:00:00,000 --> 00:00:05,000
这是翻译后的文本

2
00:00:05,000 --> 00:00:10,000
另一条翻译后的文本
```

### 双语字幕模式（勾选双语选项）

```
1
00:00:00,000 --> 00:00:05,000
This is the original text
这是翻译后的文本

2
00:00:05,000 --> 00:00:10,000
Another original text
另一条翻译后的文本
```

## 文件命名规则

翻译完成后，结果文件将保存在原文件所在目录的 `LLMTranslate` 子文件夹中，文件名规则如下：

- **单字幕模式**：`原文件名_translated_目标语言.srt`
  - 例如：`video_translated_zh.srt`

- **双语字幕模式**：`原文件名_translated_目标语言_bilingual.srt`
  - 例如：`video_translated_zh_bilingual.srt`

## 配置持久化

您的选择会被自动保存，包括：
- LLM提供商、模型、API地址
- 双语字幕选项
- 批次大小

下次打开窗口时，这些配置会自动加载。

## 注意事项

1. **双语字幕格式**：在双语模式下，原文和译文会用换行符分隔，大多数播放器都能正确显示
2. **文件大小**：双语字幕文件会比单字幕文件略大
3. **兼容性**：双语字幕格式符合SRT标准，兼容大多数视频播放器
4. **翻译质量**：翻译质量取决于选择的LLM模型，建议使用较新的模型以获得更好的效果

## 常见问题

### Q: 双语字幕在播放器中显示不正常怎么办？

A: 大多数现代播放器（如VLC、PotPlayer、MPC-HC等）都支持多行字幕显示。如果显示不正常，可以尝试：
- 更新播放器到最新版本
- 调整播放器的字幕设置
- 使用单字幕模式

### Q: 可以只保留原文，不显示译文吗？

A: 取消勾选 **"生成双语字幕"** 选项即可只生成译文。如果需要只保留原文，请直接使用原字幕文件。

### Q: 双语字幕的原文和译文顺序可以调换吗？

A: 当前版本固定为"原文在上，译文在下"的格式。如需调整，可以手动编辑生成的SRT文件。

## 技术细节

- **实现方式**：在翻译完成后，根据用户选择将原文和译文组合或只保留译文
- **格式标准**：严格遵循SRT字幕格式规范
- **编码**：使用UTF-8编码，确保支持所有语言字符

## 更新日志

### v1.0 (2025-10-27)
- ✨ 新增双语字幕功能
- ✅ 支持原文和译文同时显示
- 💾 配置自动保存和加载
- 📝 文件名自动区分单语和双语模式

