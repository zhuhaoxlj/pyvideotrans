# 🎉 新增字幕功能快速使用指南

## ✅ 现在已修复，请重启程序！

已经为你添加了**两个**强大的字幕处理工具：

---

## 🔧 工具1：字幕智能断句（快速方案）

**位置：** 菜单栏 → `工具` → `字幕智能断句`

**功能：** 将已有的长字幕按句子分割成短句

**使用场景：**
- 已经有字幕文件（.srt）
- 字幕时间跨度太长，显示太多行
- 快速修复，几秒钟完成

**使用步骤：**
1. 重启程序
2. 点击菜单：`工具` → `字幕智能断句`
3. 选择你的 `.srt` 字幕文件
4. 设置最大持续时间（推荐3-5秒）
5. 点击 "🚀 开始分割"
6. 查看结果，打开保存目录

**优点：**
- ⚡ 极快（几秒钟）
- 📦 不需要额外安装
- 🎯 简单易用

**缺点：**
- ⚠️ 时间是平均分配的，不是基于实际语音

---

## 🤖 工具2：AI智能字幕生成（最佳方案）⭐

**位置：** 菜单栏 → `工具` → `AI智能字幕生成`

**功能：** 基于 Faster-Whisper AI 的词级时间戳，重新生成精确字幕

**使用场景：**
- 从视频/音频文件直接生成字幕
- 需要精确到词级的时间对齐
- 追求最佳质量

**使用步骤：**
1. 重启程序
2. 点击菜单：`工具` → `AI智能字幕生成`
3. 选择视频或音频文件
4. 设置参数：
   - 语言：en=英语, zh=中文, 等
   - 模型：large-v3-turbo（推荐）
   - 最大持续时间：5秒
   - 最大词数：15词
   - 🚀 加速设备：CPU / CUDA (NVIDIA GPU)
5. 点击 "🎬 开始生成智能字幕"
6. 等待AI处理（可能需要几分钟）
7. 查看结果

**优点：**
- 🎯 精确到每个词的时间戳
- 🧠 智能识别句子边界
- 🌍 支持多种语言
- ⚡ 支持 CUDA 加速（NVIDIA GPU）
- ✅ 最佳质量

**缺点：**
- ⏳ 较慢（几分钟）
- 💾 需要下载AI模型
- 🖥️ 需要较好的硬件

---

## 📋 命令行快速使用

如果你不想打开GUI，可以直接使用命令行：

### 方法1：简单分割（已有字幕）

```bash
cd /Users/mark/Downloads/pyvideotrans

# 处理你的TED演讲字幕
python split_subtitles.py "resource/How parades can build community  Chantelle Rytter  TEDxAtlanta.srt" 5
```

### 方法2：AI智能生成（有视频）

```bash
cd /Users/mark/Downloads/pyvideotrans

# 从视频生成智能字幕
python regenerate_subtitles_smart.py "你的视频.mp4" --language en

# Windows/Linux CUDA加速
python regenerate_subtitles_smart.py "你的视频.mp4" --device cuda

# 中文视频
python regenerate_subtitles_smart.py "你的视频.mp4" --language zh
```

---

## 🎯 你的TED演讲字幕处理建议

**你的文件：**
```
resource/How parades can build community  Chantelle Rytter  TEDxAtlanta.srt
```

**已经处理过的：**
```
resource/How parades can build community  Chantelle Rytter  TEDxAtlanta_split.srt
```
✅ 从37条分割成101条，每条更短更清晰

**如果还想要更好的效果：**

```bash
# 如果你有原始视频文件，用AI重新生成
python regenerate_subtitles_smart.py "resource/你的视频.mp4" --language en --max-duration 4

# 生成的文件会是: 你的视频_smart.srt
```

---

## 🔄 重要提示

**请重启程序才能看到新功能！**

重启后，你会在菜单栏 → `工具` 下看到：

```
工具
├─ 字幕翻译
├─ 语音识别  
├─ ...
├─ 合并两个字幕
├─ 字幕智能断句        ← 新增！快速分割
├─ AI智能字幕生成      ← 新增！AI精确生成
└─ ...
```

---

## 💡 选择建议

| 场景 | 推荐工具 | 理由 |
|------|---------|------|
| 已有字幕，快速修复 | 字幕智能断句 | 几秒钟完成 |
| 追求最佳质量 | AI智能字幕生成 | 精确到词级 |
| 没有字幕文件 | AI智能字幕生成 | 从视频直接生成 |
| 简单快速 | 命令行工具 | 一行命令搞定 |

---

## 🎊 核心对比

### 原理对比：

**字幕智能断句：**
```
原理：按标点符号分割 + 平均分配时间
速度：⚡⚡⚡ 极快
准确度：⭐⭐⭐ 中等
```

**AI智能字幕生成：**
```
原理：AI语音识别 + 词级时间戳
速度：⚡⚡ 较快
准确度：⭐⭐⭐⭐⭐ 极高
```

---

## 📞 遇到问题？

1. **看不到新功能** → 重启程序
2. **报错找不到模块** → 已修复，重启即可
3. **AI生成很慢** → 
   - 第一次需要下载模型，正常现象
   - Windows/Linux：选择 CUDA 设备（需要NVIDIA显卡）
   - Mac用户：CPU 性能已经很不错
4. **想加速** → 选择 "CUDA" 设备（仅NVIDIA显卡）
5. **Mac MPS支持？** → 查看 `MPS支持说明.md`

---

## 🍎 Mac M1/M2/M3 用户说明

**关于 MPS 加速：**

目前 `faster-whisper` 暂不支持 MPS（上游库限制）。

- ✅ 程序会自动使用 CPU（M1/M2的CPU已经很快）
- ✅ 如需 MPS 加速，可使用项目主界面的"openai-whisper(本地)"
- 📖 详细说明：`MPS支持说明.md`

---

**祝你使用愉快！** 🎉

现在就重启程序试试吧！

